<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Placement Test</title>
</head>
<body>

<h2>Placement Test Tool</h2>

<label>رقم الطالب</label><br>
<input id="studentId"><br><br>

<label>العلامة</label><br>
<input id="score" type="number" min="0" max="100"><br><br>

<label>الدرجة العلمية</label><br>
<select id="degree">
  <option>Associate Degree</option>
  <option>Higher National Certificate Level 4</option>
  <option>Higher National Diploma Level 5</option>
  <option>Vocational Diploma</option>
  <option>Bachelor Degree</option>
</select><br><br>

<button onclick="submitResult()">حفظ النتيجة</button>

<p id="status"></p>

<script>
function submitResult() {

  const studentId = document.getElementById("studentId").value;
  const score = Number(document.getElementById("score").value);
  const degree = document.getElementById("degree").value;

  if (!studentId || isNaN(score)) {
    document.getElementById("status").innerText = "❌ يرجى إدخال جميع البيانات";
    return;
  }

  const data = {
    StudentID: studentId,
    Score: score,
    Degree: degree,
    LevelName: "",
    LevelCode: "",
    ExemptedSubjects: ""
  };

  fetch("https://defaulta162c5327a0c464596fd20d019cf4e.5a.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/e92b89f4895c4f1591d02e0fc2a7e609/triggers/manual/paths/invoke?api-version=1", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(data)
  })
  .then(res => {
    if (!res.ok) throw new Error("Request failed");
    return res.text();
  })
  .then(() => {
    document.getElementById("status").innerText = "✅ تم حفظ النتيجة في SharePoint";
  })
  .catch(() => {
    document.getElementById("status").innerText = "❌ خطأ أثناء الإرسال";
  });
}
</script>

</body>
</html>


